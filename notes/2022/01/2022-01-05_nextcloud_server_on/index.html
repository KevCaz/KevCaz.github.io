<!doctype html><html lang=en-us><head><title>KevCaz's Website</title>
<link rel=stylesheet href=https://kevcaz.github.io/css/main.min.2e0874d93dedc5b86cd2d2b471abad3b89e2cad618d46f8b7d6ef32f24918729.css media=screen><link rel=stylesheet href=../../../../css/perso.css><link rel=stylesheet href=../../../../css/family.css><meta name=author content="Kevin Cazelles"><meta name=institution content="Department of Integrated Biology, University of Guelph"><meta name=news_keywords content="[raspberry pi nextcloud]"><meta property="og:site_name" content="KevCaz's Website"><meta property="og:title" content="Nextcloud server on a Raspberry Pi 3B"><meta property="og:image" content="https://kevcaz.github.io/img/imgOG/kevcaz_og.png"><meta property="og:description" content="Kevin Cazelles's website"></head><body><div class=page><div class=ctn-sidebar-primary><div class=ctt-sidebar-primary><h1>KevCaz's Website</h1><div class=primary-sidebar-premenu><h2><i class='fas fa-align-center'></i> <button onclick='dropDown("p-s-menu")'> Menu</button></h2></div><div class=primary-sidebar-menu id=p-s-menu><h2><a href=../../../../><i class='fas fa-home'></i> Home</a></h2><h2><a onclick='dropDown("dropdown-research")' href=javascript:void(0)><i class='fas fa-microscope'></i> Research</a></h2><div class=dropdown id=dropdown-research><h3><a href=../../../../about_my_research/>About my research</a></h3><h3><a href=../../../../publications/>Publications</a></h3><h3><a href=../../../../software/>Software</a></h3><h3><a href=../../../../talks/>Talks & Posters</a></h3><h3><a href=../../../../teaching/>Teaching</a></h3></div><h2 id=current-dropdown><a onclick='dropDown("dropdown-blog")' href=javascript:void(0)><i class='fas fa-blog'></i> Blog</a></h2><div class=dropdown-current id=dropdown-blog><h3><a href=../../../../econotes/>EcoNotes</a></h3><h3 id=current><a href=../../../../notes/>SilicoNotes</a></h3><h3><a href=https://insileco.github.io/>inSilecoBlog</a></h3></div><h2><a onclick='dropDown("dropdown-perso")' href=javascript:void(0)><i class='fas fa-person-booth'></i> Miscelleneous</a></h2><div class=dropdown id=dropdown-perso><h3><a href=../../../../perso/books>Books</a></h3><h3><a href=../../../../perso/movies>Movies</a></h3><h3><a href=../../../../perso/opinions>Opinions</a></h3></div></div><div class=footer><hr id=hr-footer align=left><div class=social-media-banner><a href=https://github.com/KevCaz><i class='fab fab fa-github-square'></i></a>
<a href=https://stackoverflow.com/users/8038778><i class='fab fa-stack-overflow'></i></a>
<a href=https://mastodon.social/@KCazelles><i class='fab fa-mastodon'></i></a>
<a href=http://orcid.org/0000-0001-6619-9874><i class='ai ai-orcid-square'></i></a>
<a href="https://scholar.google.ca/citations?user=xzvcu7cAAAAJ%26hl"><i class='ai ai-google-scholar-square'></i></a>
<a href=https://www.researchgate.net/profile/Kevin_Cazelles><i class='ai ai-researchgate-square'></i></a>
<a href=https://kevcaz.github.io/index.xml><i class="fas fa-rss-square"></i></a></div><div class=footer-custom>Website built with <a href=https://gohugo.io/>Hugo</a>.<br><i class='fas fa-code'></i> available on <a href=https://github.com/KevCaz/KevCaz.github.io><i class='fab fa-github'></i></a>.<br>Content under <a href=https://creativecommons.org/publicdomain/zero/1.0><i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-zero'></i></a> unless otherwise specified.<br>Latest build: 01 Dec 2024 04:49 UTC</div></div></div></div><div class=ctn-main-content><div class=ctt-main-content><div class=article-meta><h1 id=title>Nextcloud server on a Raspberry Pi 3B</h1><h3 class=date>January 5, 2022<div class=tags><i class="fas fa-tags" aria-hidden=true></i> &nbsp;
<a href=../../../../tags/raspberry-pi><kbd class=item-tag>raspberry pi</kbd></a>
<a href=../../../../tags/nextcloud><kbd class=item-tag>nextcloud</kbd></a></div></div><div class=article-main><p>I have already written elsewhere all the good that I think about Raspberry Pi. It is a fantastic project supported by a great community. I personally own a <a href=../../../../notes/rapsberrypi/raspberrypi3b/>Rapsberry Pi model 3B</a> and so far I have been using it for several small projects. For more than a year I have been thinking about running some small services on my Raspberry Pi, but never took the time to set it up. I finally took Christmas time to do it and I started with <a href=https://nextcloud.com/>NextCloud</a>. This post summarizes the different installation steps I went through to get a NextCloud server running on my Raspberry Pi. Note that I do not intend to provide a walk-through for the installation, I rather explain what needs to be done, give some commands and point to online documentation and tutorials. There are plenty of good tutorials available on line, notably the ones by <a href=https://pimylifeup.com/>Pi My Life Up</a>, I don&rsquo;t think they need to be duplicated!</p><h2 id=install-rapsberry-pi-os>Install Rapsberry Pi OS</h2><p>For this project, I decided to re-install my Raspberry from scratch. Before doing so, I checked the version of Raspbian installed on it using <a href=https://smxi.org/docs/inxi.htm>inxi</a>:</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ inxi -S
</span></span><span style=display:flex><span>System:    Host: raspberrypi Kernel: 5.10.17-v7+ armv7l bits: <span style=color:#ea9d34>32</span> Console: tty <span style=color:#ea9d34>0</span> 
</span></span><span style=display:flex><span>           Distro: Raspbian GNU/Linux <span style=color:#ea9d34>10</span> <span style=color:#797593>(</span>buster<span style=color:#797593>)</span> 
</span></span></code></pre></td></tr></table></div></div><p>Note that Raspbian is now referred to as <a href=https://www.raspberrypi.com/software/>Raspberry Pi OS</a>, but is still a Debian image suited/optimized for Raspberry Pi devices. As I was looking for a way to download the image and install it on my microSD card (FWIW, a 64 Go one), I was very excited to learn that since March 2020, there is a new image utility, <a href=https://www.raspberrypi.com/news/raspberry-pi-imager-imaging-utility/>Raspberry Pi Imager</a>, that makes the installation of Raspberry Pi seamless, so I used it! First, I downloaded the <code>.deb</code> file directly from the website and I installed it on my Debian machine as follows</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ dpkg -i imager_1.6.2_amd64.deb 
</span></span></code></pre></td></tr></table></div></div><p>Then I opened and used Raspberry Pi Image which is very intuitive interface. That step actually took less time than I anticipated!</p><center><figure><img class=mg-bot src=./assets/imager.png width=80%></figure></center><h2 id=basic-settings>Basic settings</h2><p>Once the microSD card ready, I inserted it in my Raspberry Pi and started the device. For this step, I use it as a personal computer, meaning that I used a keyboard, a mouse and a screen. That way I was able to <a href=https://phoenixnap.com/kb/enable-ssh-raspberry-pi>enable SSH</a> (this is the only step that is actually <em>not</em> needed for what follows, if you are only interested in Nextcloud you can skip the rest of this section) and to check out the graphical interface, which is pretty nice! I decided to have a look at the recommended software and I was happy to see that <a href=https://www.raspberrypi.com/news/visual-studio-code-comes-to-raspberry-pi/>we can now install Visual Studio on a Raspberry Pi</a>! I install it along with LibreOffice and Mathematica, I just thought that having some software installed wouldn&rsquo;t hurt in case somebody needs to do some work on it at some point.</p><center><figure><img class=mg-bot src=./assets/vscode.png width=100%><figcaption><div class="highlight justify"><i class="fas fa-info-circle" aria-hidden></i> Visual Studio on my Raspberry Pi model 3B.</div></figcaption></figure></center><p>At that point, I realized than several tools were already installed, e.g.</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ python --version
</span></span><span style=display:flex><span>Python 3.9.2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ git version
</span></span><span style=display:flex><span>git version 2.30.2
</span></span></code></pre></td></tr></table></div></div><p>I only needed to install a few others. Again, these are not needed for the NextCloud installation presented below, but those are tools I use frequently, namely <a href=https://www.docker.com/>Docker</a>, <a href=https://github.com/muesli/duf>duf</a>, <a href=https://gohugo.io/>Hugo</a>, <a href=https://smxi.org/docs/inxi.htm>inxi</a>, <a href=https://julialang.org/>Julia</a> and <a href=https://www.r-project.org/>R</a>:</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#9893a5># 4 of these can be installed via apt-get </span>
</span></span><span style=display:flex><span>$ apt-get install hugo inxi julia r-cran-bit64
</span></span><span style=display:flex><span><span style=color:#797593>[</span>...<span style=color:#797593>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9893a5># there is a bash script available online for docker </span>
</span></span><span style=display:flex><span>$ curl -fsSL https://get.docker.com -o get-docker.sh
</span></span><span style=display:flex><span>sh docker.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9893a5># duf is released on GitHub </span>
</span></span><span style=display:flex><span>$ wget -O duf.deb https://github.com/muesli/duf/releases/download/v0.6.2/duf_0.6.2_linux_armv7.deb 
</span></span><span style=display:flex><span>$ dpkg -i duf.deb 
</span></span><span style=display:flex><span>$ rm duf.deb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9893a5># below are the versions installed</span>
</span></span><span style=display:flex><span>$ julia --version
</span></span><span style=display:flex><span>julia version 1.5.3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ hugo version
</span></span><span style=display:flex><span>Hugo Static Site Generator v0.80.0/extended linux/arm BuildDate: 2021-02-09T18:47:48Z <span style=color:#797593>(</span>raspbian 0.80.0-6<span style=color:#797593>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ R --version
</span></span><span style=display:flex><span>R version 4.0.4 <span style=color:#797593>(</span>2021-02-15<span style=color:#797593>)</span> -- <span style=color:#ea9d34>&#34;Lost Library Book&#34;</span>
</span></span><span style=display:flex><span><span style=color:#797593>[</span>...<span style=color:#797593>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ docker --version
</span></span><span style=display:flex><span>Docker version 20.10.12, build e91ed57
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ duf --version
</span></span><span style=display:flex><span>duf 0.6.2 <span style=color:#797593>(</span>d1d2865<span style=color:#797593>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9893a5># new version of the OS </span>
</span></span><span style=display:flex><span>$ inxi -S
</span></span><span style=display:flex><span>System:    Host: raspberrypi Kernel: 5.10.63-v7+ armv7l bits: <span style=color:#ea9d34>32</span> Console: tty <span style=color:#ea9d34>0</span> 
</span></span><span style=display:flex><span>           Distro: Raspbian GNU/Linux11 <span style=color:#797593>(</span>bullseye<span style=color:#797593>)</span> 
</span></span></code></pre></td></tr></table></div></div><p>Note that in order to identify the right version of <code>duf</code> I needed, I checked out my CPU model with <code>inxi</code>:</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>inxi -C
</span></span><span style=display:flex><span>CPU:       Info: Quad Core model: ARMv7 v7l variant: cortex-a53 bits: <span style=color:#ea9d34>32</span> type: MCP 
</span></span><span style=display:flex><span>          Speed: <span style=color:#ea9d34>1200</span> MHz min/max: 600/1200 MHz Core speeds <span style=color:#797593>(</span>MHz<span style=color:#797593>)</span>: 1: <span style=color:#ea9d34>1200</span> 2: <span style=color:#ea9d34>1200</span> 3: <span style=color:#ea9d34>1200</span> 4: <span style=color:#ea9d34>1200</span> 
</span></span></code></pre></td></tr></table></div></div><p>This is how I knew that I needed to use the <code>ARMv7</code> image of <code>duf</code>.</p><h2 id=connect-to-my-raspberry-pi-via-ssh>Connect to my Raspberry Pi via SSH</h2><p>After the installation described above, I shut my Raspberry Pi down, and moved it next to my box, no keyboard, no mouse and no screen. And then I went back on my Debian machine. At this point I needed to locate my Raspberry Pi on my local network. Fortunately there are network tools to do so seamlessly, <a href=https://linux.die.net/man/1/arp-scan><code>arp-scan</code></a> is one of then that I was able to install using <code>apt-get</code></p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ apt-get install arp-scan
</span></span></code></pre></td></tr></table></div></div><p>Then all I had to do was running the following command (I had to run it as super user)</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ arp-scan --localnet 
</span></span></code></pre></td></tr></table></div></div><p>In the output I found something like this</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>192.168.1.25	b8:27:eb:f6:48:76	Raspberry Pi Foundation
</span></span></code></pre></td></tr></table></div></div><p>actually there were two lines like this because the wi-fi was up (and I [disabled it] by editing <a href=https://raspberrytips.com/disable-wifi-raspberry-pi/>disable the wi-fi</a> by editing <code>/boot/config</code>). So there I knew that I could connect to my Raspberry Pi with the following command.</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ssh pi@192.168.1.25
</span></span></code></pre></td></tr></table></div></div><p>Note that instead of looking for the right IP address, it is possible to use <a href=https://en.wikipedia.org/wiki/Multicast_DNS>multicast DSN (mDSN)</a>, on recent Raspberry Pi OS images, <a href=https://github.com/lathiat/avahi>avahi</a> is probably installed (see <code>systemctl status avahi-daemon.service</code>), otherwise <a href=https://medium.com/@pierre.loret.dev/install-avahi-on-your-pi-4cd63682ce37>it can be installed</a>. Assuming <code>avahi-daemon.service</code> is up and running, then you can directly do</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ssh pi@raspberrypi.local
</span></span></code></pre></td></tr></table></div></div><p>The last thing I&rsquo;ve done is that I added one of my public ssh keys to my Raspberry Pi to avoid typing my password in every time I connect to it. This is <a href=https://pimylifeup.com/raspberry-pi-ssh-keys/>well-explained in a post by Py My Life Up</a>:</p><ol><li>generate a ssh pair of keys with <code>ssh-keygen</code>,</li><li>copy a public key to your Raspberry Pi using <code>ssh-copy-id</code>.</li></ol><h2 id=using-a-static-ip>Using a static IP</h2><p>This is super easy to do, <strong>but</strong> I honestly think that before doing that there are several terms you should know. I spent a fair amount of time reading about these, playing a bit with my home rooter (e.g. I change the range of dynamic IP), and it is worth it. At least I now have a better idea of what I am doing and why I needed to get a static IP. Fortunately there are a lot of good resources available on line (on Wikipedia for instance). Below is a list of term that are worth getting acquainted with.</p><ul><li>IP address (also <a href=https://www.guru99.com/difference-ipv4-vs-ipv6.html>the difference between IPv4 and IPv6</a>);</li><li>Static versus dynamic IP;</li><li><a href=https://fr.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol>DHCP</a>;</li><li><a href=https://en.wikipedia.org/wiki/Network_address_translation>NAT</a>;</li><li><a href=https://en.wikipedia.org/wiki/Local_area_network>LAN</a> ;</li><li><a href=https://en.wikipedia.org/wiki/Network_address_translation>Gateway</a>;</li><li><a href=https://en.wikipedia.org/wiki/Subnetwork>Subnetwork</a>;</li><li>Subnet masks;</li><li><a href=https://en.wikipedia.org/wiki/Port_(computer_networking)>Port</a>;</li><li><a href=https://aws.amazon.com/route53/what-is-dns/>DSN</a></li></ul><p>I&rsquo;d like to mentioned specific page on <a href=https://routersecurity.org/ipaddresses.php>routersecurity.org</a> that helped me a lot. Now, assuming that you have a basic understanding of the terms above and that you know the range of dynamic IP used by you DHCP, you can set a static IP chosen accordingly, it only requires to check <code>/etc/resolv.conf</code> and edit <code>/etc/dhcpcd.conf</code>, as explained on <a href=https://pimylifeup.com/raspberry-pi-static-ip-address/>Pi My Life Up</a>.</p><h2 id=setting-nextcloud>Setting NextCloud</h2><p>I don&rsquo;t actually need to write anything about this because the tutorial on Py My Life Up, <a href=https://pimylifeup.com/raspberry-pi-nextcloud-server/>&ldquo;How to Setup a Raspberry Pi Nextcloud Server&rdquo;</a>, proposed an excellent tutorial that I basically followed. So if you want to set up your NextCloud server on your Raspberry Pi, just read this tutorial!</p><p>Well, &mldr; I can actually add a bit to the tutorial, because in my case I add a domain name, so I did not follow the last sections! Below are the section of the tutorial that I&rsquo;ve followed</p><ol><li>Installing Apache and PHP</li><li>Setting up a MySQL Database and User for Nextcloud (I had to install <a href=https://mariadb.org/>Mariadb</a> first)</li><li>Downloading Nextcloud on your Raspberry Pi</li><li>Configuring Apache for Nextcloud</li><li>Nextcloud Initial Setup</li><li>Moving Nextcloud’s data folder</li><li>Increasing Nextcloud’s max upload size</li></ol><p>Once those were done, I went on my DSN provider, I created an <a href=https://support.dnsimple.com/articles/a-record/>A record</a> to point to my public IP. Note that you can check your public IP by using websites that return your public IP, for instance <a href=https://wtfismyip.com/>https://wtfismyip.com/</a> and you can also access this info using commands, e.g.</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#9893a5># see https://askubuntu.com/questions/95910/command-for-determining-my-public-ip</span>
</span></span><span style=display:flex><span>wget -qO- https://ipecho.net/plain <span style=color:#797593>;</span> <span style=color:#d7827e>echo</span>  
</span></span></code></pre></td></tr></table></div></div><p>Then I opened ports 80 and 443,</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo ufw allow 80,443/tcp
</span></span></code></pre></td></tr></table></div></div><p>and then I set up the <a href=https://en.wikipedia.org/wiki/Port_forwarding>port forwarding</a> on my rooter to my Raspberry Pi. Last, I used <a href=https://letsencrypt.org/>Let&rsquo;s Encrypt</a> via <code>certbot</code> in the <code>python3-certbot-apache</code> (see this other <a href=https://pimylifeup.com/raspberry-pi-ssl-lets-encrypt/>post by Py My Life Up</a>)</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo certbot --apache
</span></span></code></pre></td></tr></table></div></div><p>I answered the questions and then I got a congratulation message, which basically means that now I could be using HTTPS for the NextCloud web interface of my serve.</p><p>Then I did some configuration work: I <a href=https://docs.nextcloud.com/server/latest/admin_manual/configuration_user/user_configuration.html>created several users</a> and add a security app, <a href="https://apps.nextcloud.com/?search=TOTP">Two-Factor TOTP Provider</a> as suggested in <a href="https://www.youtube.com/watch?v=OZ3zvyhJ8io&t=585s">this youtube video</a> (in French) which was also super useful for dealing with the installation.</p><p>Two remarks to conclude this section and this post. First, if you don&rsquo;t want to go through all these steps and are just interested in having NextCloud up and running ASAP, you can use a preinstalled SD card images proposed by <a href=https://ownyourbits.com/nextcloudpi/#download>NextCloudPi</a>. Second, all the steps described above led me to install the following packages:</p><div class=highlight><div style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo apt install apache2 php8.0 php8.0-gd php8.0-sqlite3 php8.0-curl <span style=color:#286983>\
</span></span></span><span style=display:flex><span><span style=color:#286983></span>  php8.0-zip php8.0-xml php8.0-mbstring php8.0-mysql php8.0-bz2 php8.0-intl <span style=color:#286983>\
</span></span></span><span style=display:flex><span><span style=color:#286983></span>  php-smbclient php8.0-imap php8.0-gmp libapache2-mod-php8.0 mariadb-server <span style=color:#286983>\
</span></span></span><span style=display:flex><span><span style=color:#286983></span>  python3-certbot-apache
</span></span></code></pre></td></tr></table></div></div></div></div><div class=footer2><hr id=hr-footer align=left><div class=social-media-banner><a href=https://github.com/KevCaz><i class='fab fab fa-github-square'></i></a>
<a href=https://stackoverflow.com/users/8038778><i class='fab fa-stack-overflow'></i></a>
<a href=https://mastodon.social/@KCazelles><i class='fab fa-mastodon'></i></a>
<a href=http://orcid.org/0000-0001-6619-9874><i class='ai ai-orcid-square'></i></a>
<a href="https://scholar.google.ca/citations?user=xzvcu7cAAAAJ%26hl"><i class='ai ai-google-scholar-square'></i></a>
<a href=https://www.researchgate.net/profile/Kevin_Cazelles><i class='ai ai-researchgate-square'></i></a>
<a href=https://kevcaz.github.io/index.xml><i class="fas fa-rss-square"></i></a></div><div class=footer-custom>Website built with <a href=https://gohugo.io/>Hugo</a>.<br><i class='fas fa-code'></i> available on <a href=https://github.com/KevCaz/KevCaz.github.io><i class='fab fa-github'></i></a>.<br>Content under <a href=https://creativecommons.org/publicdomain/zero/1.0><i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-zero'></i></a> unless otherwise specified.<br>Latest build: 01 Dec 2024 04:49 UTC</div></div></div><div class=ctn-sidebar-secondary><div class=ctt-sidebar-secondary><h1><a href=#><i class='far fas fa-chevron-up'></i></a></h1><script src=../../../../js/sidebar-secondary.js></script><h1><a onclick=scrollToBottom()><i class='far fas fa-chevron-down'></i></a></h1></div></div></div><script src=../../../../js/sidebar-primary-dropdown.js></script><script>scrollingElement=document.scrollingElement||document.body;function scrollToBottom(){scrollingElement.scrollTop=scrollingElement.scrollHeight}</script></body></html>